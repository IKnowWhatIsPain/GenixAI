<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#8B5CF6">
  <meta name="description" content="Great Blast - An addictive puzzle game with 50 challenging levels!">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Great Blast">
  <link rel="manifest" href="/manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <title>üéÆ Great Blast</title>
</head>
<body>
  <!-- Home Screen -->
  <div id="homeScreen" class="screen active">
    <div class="home-container">
      <div class="logo-section">
        <h1 class="game-title">üéÆ Great Blast</h1>
        <p class="game-subtitle">Match, Clear, Conquer!</p>
      </div>
      
      <div class="menu-buttons">
        <button class="btn btn-primary" data-testid="button-play" id="playBtn">
          <span class="btn-icon">‚ñ∂</span>
          <span>Play Game</span>
        </button>
        <button class="btn btn-secondary" data-testid="button-how-to-play" id="howToPlayBtn">
          <span class="btn-icon">‚ùì</span>
          <span>How to Play</span>
        </button>
        <button class="btn btn-secondary" data-testid="button-sound-toggle" id="soundToggleBtn">
          <span class="btn-icon" id="soundIcon">üîä</span>
          <span id="soundText">Sound On</span>
        </button>
      </div>
      
      <div class="home-stats">
        <div class="stat-item">
          <div class="stat-label">High Score</div>
          <div class="stat-value" data-testid="text-high-score" id="homeHighScore">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Best Level</div>
          <div class="stat-value" data-testid="text-best-level" id="homeBestLevel">1</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Game Screen -->
  <div id="gameScreen" class="screen">
    <!-- Header HUD -->
    <header class="game-header">
      <div class="hud-item">
        <div class="hud-label">Score</div>
        <div class="hud-value" data-testid="text-current-score" id="currentScore">0</div>
      </div>
      <div class="hud-item hud-level">
        <div class="hud-label">Level</div>
        <div class="hud-value level-number" data-testid="text-current-level" id="currentLevel">1</div>
      </div>
      <div class="hud-item">
        <div class="hud-label">High Score</div>
        <div class="hud-value" data-testid="text-game-high-score" id="gameHighScore">0</div>
      </div>
    </header>

    <!-- Progress Bar -->
    <div class="progress-container">
      <div class="progress-label">
        <span>Target: <span data-testid="text-target-score" id="targetScore">200</span></span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" data-testid="progress-level" id="progressBar"></div>
      </div>
    </div>

    <!-- Game Board -->
    <div class="game-container">
      <div class="board-wrapper">
        <div id="gameBoard" class="game-board" data-testid="game-board"></div>
      </div>
    </div>

    <!-- Block Pieces Dock -->
    <div class="pieces-dock">
      <div class="pieces-container" id="piecesContainer" data-testid="pieces-container">
        <div class="piece-slot" data-testid="piece-slot-0" id="piece0"></div>
        <div class="piece-slot" data-testid="piece-slot-1" id="piece1"></div>
        <div class="piece-slot" data-testid="piece-slot-2" id="piece2"></div>
      </div>
    </div>

    <!-- Back Button -->
    <button class="back-btn" data-testid="button-back-home" id="backHomeBtn">
      <span>‚Üê Home</span>
    </button>
  </div>

  <!-- How to Play Modal -->
  <div id="howToPlayModal" class="modal">
    <div class="modal-content">
      <h2 class="modal-title">How to Play</h2>
      <div class="instructions">
        <div class="instruction-step">
          <div class="step-number">1</div>
          <div class="step-text">
            <h3>Drag & Drop Blocks</h3>
            <p>Drag the block pieces from the bottom dock onto the 10√ó10 grid</p>
          </div>
        </div>
        <div class="instruction-step">
          <div class="step-number">2</div>
          <div class="step-text">
            <h3>Clear Lines</h3>
            <p>Fill complete rows or columns to clear them and earn points</p>
          </div>
        </div>
        <div class="instruction-step">
          <div class="step-number">3</div>
          <div class="step-text">
            <h3>Level Up</h3>
            <p>Reach the target score to advance through 50 challenging levels</p>
          </div>
        </div>
        <div class="instruction-step">
          <div class="step-number">4</div>
          <div class="step-text">
            <h3>Strategy</h3>
            <p>Plan ahead! Game ends when no pieces can be placed</p>
          </div>
        </div>
      </div>
      <button class="btn btn-primary" data-testid="button-close-instructions" id="closeInstructionsBtn">Got It!</button>
    </div>
  </div>

  <!-- Level Complete Modal -->
  <div id="levelCompleteModal" class="modal">
    <div class="modal-content celebration">
      <div class="confetti" id="confetti"></div>
      <h2 class="modal-title">üéâ Level Complete!</h2>
      <div class="level-complete-info">
        <div class="completed-level">Level <span data-testid="text-completed-level" id="completedLevel">1</span></div>
        <div class="level-score">Score: <span data-testid="text-level-score" id="levelScore">0</span></div>
        <div class="stars" data-testid="stars-rating" id="starsDisplay">
          <span class="star">‚≠ê</span>
          <span class="star">‚≠ê</span>
          <span class="star">‚≠ê</span>
        </div>
      </div>
      <button class="btn btn-primary" data-testid="button-next-level" id="nextLevelBtn">Next Level ‚Üí</button>
    </div>
  </div>

  <!-- Victory Modal -->
  <div id="victoryModal" class="modal">
    <div class="modal-content celebration victory">
      <div class="confetti" id="victoryConfetti"></div>
      <h2 class="modal-title">üèÜ Congratulations!</h2>
      <div class="victory-message">
        <p class="victory-text">You've conquered all 50 levels!</p>
        <p class="victory-subtitle">You are a Great Blast Champion!</p>
        <div class="final-stats">
          <div class="final-stat">
            <div class="final-stat-label">Final Score</div>
            <div class="final-stat-value" data-testid="text-final-score" id="finalScore">0</div>
          </div>
          <div class="final-stat">
            <div class="final-stat-label">High Score</div>
            <div class="final-stat-value" data-testid="text-victory-high-score" id="victoryHighScore">0</div>
          </div>
        </div>
      </div>
      <button class="btn btn-primary" data-testid="button-play-again" id="playAgainBtn">Play Again</button>
    </div>
  </div>

  <!-- Game Over Modal -->
  <div id="gameOverModal" class="modal">
    <div class="modal-content">
      <h2 class="modal-title">Game Over</h2>
      <div class="game-over-info">
        <p class="game-over-text">No more moves available!</p>
        <div class="game-over-stats">
          <div class="stat-row">
            <span>Level Reached:</span>
            <span data-testid="text-game-over-level" id="gameOverLevel">1</span>
          </div>
          <div class="stat-row">
            <span>Final Score:</span>
            <span data-testid="text-game-over-score" id="gameOverScore">0</span>
          </div>
        </div>
      </div>
      <div class="modal-buttons">
        <button class="btn btn-primary" data-testid="button-retry" id="retryBtn">Try Again</button>
        <button class="btn btn-secondary" data-testid="button-home" id="homeBtn">Home</button>
      </div>
    </div>
  </div>

  <!-- Dragging Piece Preview -->
  <div id="dragPreview" class="drag-preview" data-testid="drag-preview"></div>

  <script src="/script.js"></script>
</body>
</html>
